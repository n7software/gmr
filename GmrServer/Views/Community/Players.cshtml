@{
    Layout = null;

    int totalPages = ViewBag.TotalPages ?? 0;
    int playersPerPage = ViewBag.PlayersPerPage ?? 15;

    string listHeight = (playersPerPage * 43) + "px";
}

<div id="players-navigation">
    <div class="player-paging">
        <img class="page-button" src="/Content/images/page-left.png" width="16" height="16" style="margin-right: 13px;" alt="Previous" title="Previous" onclick="previousPlayerPage();" />
        <input type="number" id="player-page" class="page-input" value="1" onchange="pageTextChanged();" />
        <span class="page-of">of <strong>@totalPages</strong></span>
        <img class="page-button" src="/Content/images/page-right.png" width="16" height="16" style="margin-left: 13px;" alt="Next" title="Next" onclick="nextPlayerPage();" />
    </div>

    <div class="find-player">
        <input id="find-player-input"
            class="text-box single-line watermark"
            type="text"
            value="Filter by player name"
            onfocus="watermark(this);"
            onblur="findPlayer();"
            onkeypress="return checkPlayerFilterKey(event);" />
        <div id="clear-player-name-filter"
            class="button link-button delete-icon unparsed-tooltip"
            title="Clear the player name filter"
            onclick="clearPlayerFilter();">
        </div>
    </div>
</div>

<div class="player-list">
    <div id="player-list-header">
        <div class="player-title player-cell">
            <span class="player-cell-title">Player</span>
            @if (GmrServer.Global.UserSteamID > 0)
            {
                <a class="find-user-page" href="#" onclick="findUserPage(); return false;">(Find Me)</a>
            }
        </div>
        <div class="player-rank player-cell">
            <span class="player-cell-title">Rank</span>
        </div>
        <div class="player-points player-cell unparsed-tooltip" onclick="toggleColumnSort('points');" title="The total points the player has earned">
            <span class="player-cell-title">Points</span>
            <div class="player-sort-icon" />
        </div>
        <div class="player-turns player-cell unparsed-tooltip" onclick="toggleColumnSort('turns');" title="The total turns the player has taken">
            <span class="player-cell-title">Turns</span>
            <div class="player-sort-icon" />
        </div>
        <div class="player-games player-cell unparsed-tooltip" onclick="toggleColumnSort('games');" title="The amount of games the player is currently in">
            <span class="player-cell-title">Games</span>
            <div class="player-sort-icon" />
        </div>
        <div class="player-average-turn player-cell unparsed-tooltip" onclick="toggleColumnSort('average-turn');" title="The average time it takes player to take their turn in the games they're currently in">
            <span class="player-cell-title">Avg. Turn</span>
            <div class="player-sort-icon" />
        </div>
        <div class="player-total-skipped player-cell unparsed-tooltip" onclick="toggleColumnSort('total-skipped');" title="The total times the player has been skipped">
            <span class="player-cell-title">Skipped</span>
            <div class="player-sort-icon" />
        </div>
        <div class="player-total-vacation player-cell unparsed-tooltip" onclick="toggleColumnSort('total-vacation');" title="The total times the player has been skipped due to vacation mode">
            <span class="player-cell-title">Vacation</span>
            <div class="player-sort-icon" />
        </div>
    </div>

    <div id="player-list-loading"></div>
    <div id="player-list-content" style="min-height: @listHeight;"></div>
</div>

<script type="text/javascript">
    $(function() {

        AddTooltip($('.unparsed-tooltip'));

        initializePlayerPageLoadingDots();

        pagedPlayerList.totalPages = @totalPages;
        pagedPlayerList.findPlayerName = '';

        columnNames.push("points");
        columnNames.push("games");
        columnNames.push("turns");
        columnNames.push("average-turn");
        columnNames.push("total-skipped");
        columnNames.push("total-vacation");

        clearAllColumnSorts();
        clearPlayerFilter();

        toggleColumnSort("points");
    });
</script>
