@model GmrLib.Models.PackagedUserStats
@{
    Layout = null;

    int indexLength = (ViewBag.IndexLength * 8);
    string indexWidth = indexLength + "px";
    string nameWidth = (260 - indexLength) + "px";

    bool isCurrentUser = Model.UserId == GmrServer.Global.UserSteamID;
}

<script type="text/javascript">requestUserInfo("@Model.UserId");</script>

<div class="player-row" @if (isCurrentUser)
                        {<text>style="background-color: #333;"</text>}>
    <div class="player-index player-cell" style="width: @indexWidth;">
        <div class="player-cell-text">
            @string.Format("{0:n0}", Model.Index)
        </div>
    </div>
    <div class="player-avatar player-cell">
        <a href="/Community#@Model.UserId" onclick="showPlayerDetails('@Model.UserId'); return false;">
            <img class="@Model.UserId sm avatarsm" 
                 src="@Url.Content(GmrServer.Avatar.GetBorderImages(Model.UserId).SmallBorder)"
                 style="background-image:url('@Model.AvatarUrl')"/>
        </a>
    </div>
    <div class="player-name player-cell" style="width: @nameWidth;">
        <div class="player-cell-text" onclick="showPlayerDetails('@Model.UserId');">
            @Model.UserName
        </div>
    </div>
    <div class="player-rank player-cell">
        <div class="player-cell-text">
            @GmrServer.Global.GetRankFromPoints(Model.TotalPoints, Model.UserId)
        </div>
    </div>
    <div class="player-points player-cell">
        <div class="player-cell-text">
            <img src="/Content/images/points.png" />
            <span>@string.Format("{0:n0}", Model.TotalPoints)</span>
        </div>
    </div>
    <div class="player-turns player-cell">
        <div class="player-cell-text">
            @string.Format("{0:n0}", Model.TurnCount)
        </div>
    </div>
    <div class="player-games player-cell">
        <div class="player-cell-text">
            @string.Format("{0:n0}", Model.GameCount)
        </div>
    </div>
    <div class="player-average-turn player-cell">
        <div class="player-cell-text">
            @Html.Raw(GmrServer.Global.FriendlyTimeDiff(Model.AverageTurnTime, string.Empty, true))
        </div>
    </div>
    <div class="player-total-skipped player-cell">
        <div class="player-cell-text">
            @string.Format("{0:n0}", Model.SkipCount)
        </div>
    </div>
    <div class="player-total-vacation player-cell">
        <div class="player-cell-text">
            @string.Format("{0:n0}", Model.VacationCount)
        </div>
    </div>
</div>
